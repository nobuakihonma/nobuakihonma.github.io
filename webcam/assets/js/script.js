var wc;!function(e){$(function(){"use strict";function e(){return-1!=X.indexOf("win")?"win":-1!=X.indexOf("wac")?"mac":""}function a(){if(-1!=X.indexOf("opera")||-1!=X.indexOf("opr")){var e,a;return e=/(opera|opr\/?)\s?([\d\.]+)/.exec(X),a=e?parseInt(e[2]):null,"opera opera"+a}if(-1!=X.indexOf("msie")||-1!=X.indexOf("trident")){var e,a;return e=/(msie|rv:?)\s?([\d\.]+)/.exec(X),a=e?parseInt(e[2]):null,"ie ie"+a}if(-1!=X.indexOf("edge")){var e,a;return e=/(edge\/?)\s?([\d\.]+)/.exec(X),a=e?parseInt(e[2]):null,"edge edge"+a}if(-1!=X.indexOf("chrome")){var e,a;return e=/(chrome|chrome\/?)\s?([\d\.]+)/.exec(X),a=e?parseInt(e[2]):null,"chrome chrome"+a}if(-1!=X.indexOf("safari")){var e,a;return e=/(safari|version\/?)\s?([\d\.]+)/.exec(X),a=e?parseInt(e[2]):null,"safari safari"+a}if(-1!=X.indexOf("firefox")){var e,a;return e=/(firefox|rv:?)\s?([\d\.]+)/.exec(X),a=e?parseInt(e[2]):null,"firefox firefox"+a}return""}function n(){return-1!==X.indexOf("iphone")?"iphone":-1!==X.indexOf("ipad")?"ipad":-1!==X.indexOf("android")?"android":-1!==X.indexOf("windows phone")?"windows-phone":-1!==X.indexOf("silk")?"kindle":-1!==X.indexOf("playbook")||-1!==X.indexOf("bb10")?"blackberry":!1}function t(){s=document.getElementById("js-video"),s.autoplay=!0,u=null;var e=function(){return navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia},a=function(e){console.log("error",e)};e()||console.log("UserMedia not supported");var n={video:{mandatory:{minWidth:1280}},audio:!0};window.URL=window.URL||window.webkitURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia(n,function(e){s.src=window.URL.createObjectURL(e),s.volume=0,u=e,w=new Audio,E=new(window.AudioContext||window.webkitAudioContext),l=E.sampleRate,p=E.createBiquadFilter(),p.frequency.value=2e4,m=E.createAnalyser(),m.fftSize=2048,m.smoothingTimeContant=.9,f=E.createMediaStreamSource(e),f.connect(p),p.connect(m),g=m.frequencyBinCount,v=new Uint8Array(2*g)},a),s.addEventListener("loadeddata",function(){!function e(){d=s.videoWidth,c=s.videoHeight,0!=d?(TweenLite.to(_,1,{css:{autoAlpha:0},ease:Power1.easeInOut,delay:0}),TweenLite.to(N,1,{css:{transform:"scale(1, 1)",autoAlpha:1},ease:Expo.easeInOut,delay:.25,onComplete:ae})):setTimeout(e,250)}()})}function r(){R.setSize(d,c),y.aspect=window.innerWidth/window.innerHeight,y.updateProjectionMatrix()}var i,o,s,d,c,u,w,E,f,l,m,p,g,v,h,y,R,T,H,x,M,P,O,U,A,L,b,S,B,G,z,C,I,k,F,j,q,W=($(window),$(document)),D=$("html"),N=($("body"),$("#js-container"),$("#js-wrapper"),$("#js-mask")),V=$("#js-title"),_=$("#js-loading"),J=(i=ee?window.innerWidth:$(window).width(),o=ee?window.innerHeight:$(window).height(),[]),K=[],Q=180,X=window.navigator.userAgent.toLowerCase(),Y=e(),Z=a(),ee=n(),ae=(function(){TweenLite.set(N,{css:{transform:"scale(1, 0)",autoAlpha:1}}),TweenLite.set(V,{css:{autoAlpha:0}}),D.addClass(Y).addClass(Z).addClass(ee),window.addEventListener("load",t,!1)}(),function(){TweenLite.to(N,1,{css:{autoAlpha:0},ease:Power1.easeInOut}),h=new THREE.Scene,h.fog=new THREE.FogExp2(16185078,35e-5);var e=d/-2,a=d/2,n=c/2,t=c/-2,o=1,u=1e3;y=new THREE.OrthographicCamera(e,a,n,t,o,u),h.add(y),R=new THREE.WebGLRenderer,R.setPixelRatio(window.devicePixelRatio),R.setSize(d,c),T=document.getElementById("js-canvas"),T.appendChild(R.domElement),H=new THREE.Texture(s),H.minFilter=THREE.LinearFilter,H.magFilter=THREE.LinearFilter,H.format=THREE.RGBFormat;var w=new THREE.MeshBasicMaterial({map:H}),E=new THREE.PlaneBufferGeometry(d,c,1,1),f=new THREE.Mesh(E,w);h.add(f),f.position.z=0,y.position.z=1e3,x=new THREE.PointLight(16777215,15,500),M=new THREE.AmbientLight(16777215),x.position.set(0,320,320),h.add(x,M),G=new THREE.EffectComposer(R),G.addPass(new THREE.RenderPass(h,y)),z=new THREE.ShaderPass(THREE.VignetteShader),z.uniforms.offset.value=.66,z.uniforms.darkness.value=2,G.addPass(z),C=new THREE.ShaderPass(THREE.BleachBypassShader),C.uniforms.opacity.value=.95,G.addPass(C),I=new THREE.ShaderPass(THREE.HorizontalBlurShader),I.uniforms.h.value=2/(i/1),G.addPass(I),j=new THREE.FilmPass(.35,.5,2048,!0),G.addPass(j),k=new THREE.ShaderPass(THREE.ColorifyShader),k.uniforms.color.value.setRGB(.3,.35,.35),G.addPass(k),F=new THREE.ShaderPass(THREE.RGBShiftShader),F.uniforms.amount.value=.004,F.renderToScreen=!0,G.addPass(F),L=new THREE.IcosahedronGeometry(125,1),A=[new THREE.MeshPhongMaterial({color:16777215,opacity:.35,shading:THREE.AdditiveBlending,wireframe:!0,transparent:!0,fog:!0})],P=THREE.SceneUtils.createMultiMaterialObject(L,A),P.position.x=0,P.rotation.x=0,h.add(P),U=new THREE.Geometry;for(var l=0;l<L.vertices.length;l++){var m=new THREE.Vector3;m.x=L.vertices[l].x,m.y=L.vertices[l].y,m.z=L.vertices[l].z,U.vertices.push(m)}A=new THREE.PointsMaterial({blending:THREE.AdditiveBlending,color:16777215,size:10,fog:!0,transparent:!0,opacity:1}),O=new THREE.Points(U,A),O.sortParticles=!1,h.add(O),b=new THREE.SphereBufferGeometry(50,32,16),b.dynamic=!0,b.computeFaceNormals(),S=new THREE.MeshPhongMaterial({shininess:5,fog:!0,transparent:!0,opacity:1,map:H}),B=new THREE.Mesh(b,S),h.add(B);for(var l=0;Q>l;l++){q=new THREE.BufferGeometry,K[l]=new Float32Array(3*Q);var p=new THREE.LineBasicMaterial({color:16777215,fog:!0,transparent:!0,opacity:1});J[l]=new THREE.Line(q,p),J[l].rotation.z=l*(Math.PI/2)/45,J[l].geometry.addAttribute("position",new THREE.BufferAttribute(K[l],3)),J[l].geometry.setDrawRange(0,2),J[l].array=J[l].geometry.attributes.position.array,J[l].array[0]=240,J[l].array[1]=0,J[l].array[2]=0,J[l].array[3]=260,J[l].array[4]=0,J[l].array[5]=0,J[l].geometry.addGroup(0,2,0),h.add(J[l])}ne(),window.addEventListener("resize",r,!1)}),ne=function(){if(s.readyState===s.HAVE_ENOUGH_DATA){H&&(H.needsUpdate=!0),G.render(),P.rotation.x+=.001,P.rotation.y+=.001,O.rotation.x+=.001,O.rotation.y+=.001,B.rotation.x+=-.0025,B.rotation.y+=-.0025,v=new Uint8Array(g),m.getByteFrequencyData(v);for(var e=0;Q>e;e++){var a=Math.cos(v[e]/Q),n=2/(i*(g/v[e]/Q*7.5)),t=a/512;J[e].geometry.verticesNeedUpdate=!0,J[e].geometry.attributes.position.needsUpdate=!0,J[e].geometry.attributes.position.array[0]=240-a*Q/2,J[e].geometry.attributes.position.array[3]=260-a*Q/2.5,J[e].rotation.z+=5e-4,I.uniforms.h.value=n,F.uniforms.amount.value=.004+t}}requestAnimationFrame(ne)};W.on("keyup",function(e){if(32==e.keyCode){var a=document.getElementsByTagName("canvas")[0];a.toDataURL("image/jpeg",.7)}})})}(wc||(wc={}));